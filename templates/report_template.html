<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Therapeutic Assessment Report</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            border-bottom: 3px solid #2E86AB;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #2E86AB;
            font-size: 2.5em;
            margin: 0;
        }
        
        .header .subtitle {
            color: #666;
            font-size: 1.1em;
            margin-top: 10px;
        }
        
        .session-info {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 30px;
        }
        
        .session-info h3 {
            margin-top: 0;
            color: #2E86AB;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .info-label {
            font-weight: bold;
            color: #333;
        }
        
        .info-value {
            color: #666;
        }
        
        .section {
            margin-bottom: 30px;
        }
        
        .section h2 {
            color: #A23B72;
            border-bottom: 2px solid #A23B72;
            padding-bottom: 10px;
        }
        
        .domain-scores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .domain-card {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            border-left: 4px solid #2E86AB;
        }
        
        .domain-name {
            font-weight: bold;
            color: #2E86AB;
            margin-bottom: 10px;
        }
        
        .domain-score {
            font-size: 2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .score-bar {
            width: 100%;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b 0%, #ffd93d 50%, #6bcf7f 100%);
            transition: width 0.3s ease;
        }
        
        .score-assessment {
            font-size: 0.9em;
            color: #666;
        }
        
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .insight-card {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #A23B72;
        }
        
        .insight-title {
            font-weight: bold;
            color: #A23B72;
            margin-bottom: 10px;
        }
        
        .insight-list {
            list-style: none;
            padding: 0;
        }
        
        .insight-list li {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        
        .insight-list li:before {
            content: "â€¢ ";
            color: #A23B72;
            font-weight: bold;
        }
        
        .recommendations {
            background-color: #e8f5e8;
            padding: 20px;
            border-radius: 5px;
            border-left: 4px solid #4caf50;
        }
        
        .recommendations h3 {
            color: #4caf50;
            margin-top: 0;
        }
        
        .recommendation-item {
            padding: 10px 0;
            border-bottom: 1px solid #d4edda;
        }
        
        .recommendation-item:last-child {
            border-bottom: none;
        }
        
        .transcript-section {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin-top: 30px;
        }
        
        .transcript-content {
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.8;
            color: #333;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            padding: 15px;
            background-color: white;
        }
        
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            font-size: 0.9em;
            color: #666;
            text-align: center;
        }
        
        .disclaimer {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin-top: 30px;
        }
        
        .disclaimer h4 {
            color: #856404;
            margin-top: 0;
        }
        
        .disclaimer p {
            color: #856404;
            margin-bottom: 0;
        }
        
        .chart-container {
            text-align: center;
            margin: 20px 0;
        }
        
        .chart-container img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .executive-summary {
            background-color: #e3f2fd;
            padding: 20px;
            border-radius: 5px;
            border-left: 4px solid #2196f3;
            margin-bottom: 30px;
        }
        
        .executive-summary h3 {
            color: #1976d2;
            margin-top: 0;
        }
        
        .overall-score {
            font-size: 2em;
            font-weight: bold;
            color: #1976d2;
            text-align: center;
            margin: 15px 0;
        }
        
        .framework-analysis {
            margin-bottom: 25px;
        }
        
        .framework-title {
            font-weight: bold;
            color: #2E86AB;
            margin-bottom: 10px;
        }
        
        .framework-details {
            margin-left: 20px;
        }
        
        .framework-details h5 {
            color: #666;
            margin: 10px 0 5px 0;
        }
        
        .framework-details ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .framework-details li {
            margin-bottom: 5px;
        }
        
        @media print {
            body {
                background-color: white;
            }
            
            .container {
                box-shadow: none;
                padding: 0;
            }
            
            .section {
                page-break-inside: avoid;
            }
            
            .domain-scores {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .domain-scores {
                grid-template-columns: 1fr;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            .insights-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Therapeutic Assessment Report</h1>
            <div class="subtitle">{{ report_type }}</div>
        </div>

        <!-- Session Information -->
        <div class="session-info">
            <h3>Session Information</h3>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">Session Date:</span>
                    <span class="info-value">{{ session_date }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Session Time:</span>
                    <span class="info-value">{{ session_time }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Duration:</span>
                    <span class="info-value">{{ session_duration }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Report Generated:</span>
                    <span class="info-value">{{ report_generated }}</span>
                </div>
            </div>
        </div>

        <!-- Executive Summary -->
        <div class="executive-summary">
            <h3>Executive Summary</h3>
            <div class="overall-score">Overall Score: {{ overall_score }}/10</div>
            <p>{{ executive_summary_text }}</p>
        </div>

        <!-- Domain Scores -->
        <div class="section">
            <h2>Therapeutic Domain Analysis</h2>
            <div class="domain-scores">
                {% for domain, data in domain_scores.items() %}
                <div class="domain-card">
                    <div class="domain-name">{{ data.name }}</div>
                    <div class="domain-score">{{ data.score }}/10</div>
                    <div class="score-bar">
                        <div class="score-fill" style="width: {{ data.score * 10 }}%"></div>
                    </div>
                    <div class="score-assessment">{{ data.assessment }}</div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Visualization -->
        {% if include_visualizations %}
        <div class="section">
            <h2>Visual Analysis</h2>
            <div class="chart-container">
                <img src="data:image/png;base64,{{ radar_chart_base64 }}" alt="Domain Scores Radar Chart">
            </div>
        </div>
        {% endif %}

        <!-- Detailed Insights -->
        <div class="section">
            <h2>Detailed Analysis</h2>
            
            <!-- Session Themes -->
            {% if session_themes %}
            <div class="insight-card">
                <div class="insight-title">Session Themes</div>
                <ul class="insight-list">
                    {% for theme in session_themes %}
                    <li>{{ theme }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            <!-- Progress Indicators -->
            {% if progress_indicators %}
            <div class="insight-card">
                <div class="insight-title">Progress Indicators</div>
                <ul class="insight-list">
                    {% for indicator in progress_indicators %}
                    <li>{{ indicator }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            <!-- Framework-specific Analysis -->
            {% for framework, analysis in detailed_analysis.items() %}
            <div class="framework-analysis">
                <div class="framework-title">{{ framework.title }} Analysis</div>
                <div class="framework-details">
                    {% for key, values in analysis.items() %}
                    {% if key != 'score' and values %}
                    <h5>{{ key.replace('_', ' ').title() }}:</h5>
                    <ul>
                        {% for value in values[:3] %}
                        <li>{{ value }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Recommendations -->
        {% if recommendations %}
        <div class="section">
            <h2>Recommendations</h2>
            <div class="recommendations">
                <h3>Suggested Actions for Future Sessions</h3>
                {% for recommendation in recommendations %}
                <div class="recommendation-item">
                    {{ loop.index }}. {{ recommendation }}
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- Transcript -->
        {% if include_transcript %}
        <div class="section">
            <h2>Session Transcript</h2>
            <div class="transcript-section">
                <div class="transcript-content">{{ transcript }}</div>
            </div>
        </div>
        {% endif %}

        <!-- Footer -->
        <div class="footer">
            <p><strong>Report Information:</strong></p>
            <p>Generated on {{ report_generated }} | Version {{ app_version }}</p>
            <p>Analysis powered by AI therapeutic assessment tools</p>
        </div>

        <!-- Disclaimer -->
        <div class="disclaimer">
            <h4>Important Disclaimer</h4>
            <p>This analysis is intended as a supplementary tool for therapeutic reflection and should not replace professional clinical judgment. All therapeutic decisions should be made in consultation with qualified mental health professionals. This report contains confidential information and should be handled in accordance with HIPAA and other applicable privacy regulations.</p>
        </div>
    </div>
</body>
</html>
